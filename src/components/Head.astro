---
/**
  Override the default Head component to:
    - Add custom styles for the Nav buttons in the header (https://github.com/lorenzolewis/starlight-utils/issues/43)
    - Add the `og:image` and `twitter:image` meta tags containing the URL of the generated image for all documentation pages.
    - Add some custom styles (these styles will be applied before the default styles)
*/

import type { Props } from '@astrojs/starlight/props';
import Default from '@astrojs/starlight/components/Head.astro';

const currentProduct = Astro.props.entry.slug.split('/')[0];

const isHomepage = Astro.props.slug === '';
const isEnterprise = currentProduct === 'enterprise';
const isDeveloper = currentProduct === 'developer';
const isCrowdin = currentProduct && !isEnterprise && !isDeveloper;

const ogImageUrl = new URL(
    `/og/${Astro.props.id.replace(/\.\w+$/, '.png')}`,
    Astro.site,
)
---

<Default {...Astro.props}><slot /></Default>

<meta property="og:image" content={ogImageUrl} />
<meta name="twitter:image" content={ogImageUrl} />

<style>
  :root {
    .nav-link {
      padding: .25rem .75rem;
      display: inline-block;
      border-radius: .5rem;
      white-space: nowrap;

      &:hover {
        background-color: rgba(var(--crowdin-cards-color), .05);
      }
    }

    .social-icons a {
      color: var(--sl-color-gray-1);
    }

    select {
      outline: none;
    }
  }
</style>

{isHomepage && (
  <style>
      .content-panel:first-child {
        overflow: hidden;
      }
  </style>
)}

{isCrowdin && (
  <style>
    #crowdin-nav-button {
      font-weight: 600;
      color: var(--sl-color-black);
      background-color: var(--sl-color-white);
    }
  </style>
)}

{isEnterprise && (
  <style>
    #enterprise-nav-button {
      font-weight: 600;
      color: var(--sl-color-black);
      background-color: var(--sl-color-white);
    }
  </style>
)}

{isDeveloper && (
  <style>
    #developer-nav-button {
      font-weight: 600;
      color: var(--sl-color-black);
      background-color: var(--sl-color-white);
    }
  </style>
)}
